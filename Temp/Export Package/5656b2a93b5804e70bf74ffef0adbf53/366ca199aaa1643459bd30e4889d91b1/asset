using UnityEngine;
using System.Collections;

public class Append : String
{

    public override Vector3 Left(Node node)
    {
        int i = 0;
        for (i = 0; i < referencedBy.Count; i++)
        {
            if (referencedBy[i] == node)
            {
                break;
            }
        }
        return new Vector3(pos.x, (2 * pos.y + 60 + i * 35) / 2, 0);
    }
    //combine the strings from all the connected String nodes
    public override string GetResult()
    {
        string s = "";
        for (int i = 0; i < referencedBy.Count; i++)
        {
            String temp = referencedBy[i] as String;
            s += temp.GetResult();
        }
        return s;
    }
    public override string Type()
    {
        return "Append";
    }
    //make sure we're only attaching Strings
    public override void Attach()
    {
        if (attachNode.BaseType() == "String")
            base.Attach();
        else
            Debug.LogError("Wrong type (should be String)");
    }
#if UNITY_EDITOR
    //print the name of each connected node
    public override void DrawNode(int id = 0)
    {
        for (int i = 0; i < referencedBy.Count; i++)
        {
            GUILayout.BeginHorizontal();
            GUILayout.Label("Node " + (i + 1).ToString() + ": " + referencedBy[i].name);
            //the option to reorder nodes
            ReorderReferencesUpDown(i);
            GUILayout.EndHorizontal();
        }
        base.DrawNode(id);
    }
    protected override void PrintValue()
    {
        value = GetResult();
        GUILayout.BeginHorizontal();
        GUILayout.FlexibleSpace();
        GUILayout.Label("\"" + value + "\"");
        GUILayout.EndHorizontal();
    }
#endif
}
